import{b as r,u as N,j as e,R as b}from"./index-CkvAdKOf.js";import{a as w}from"./index-hw17F6dq.js";import{d as v,c as M}from"./index-DvQ5XEFF.js";import{S}from"./SideBar-Cb9YIg1_.js";import{a as i}from"./axios-upsvKRUO.js";import{A as E}from"./api-oWY9WQi5.js";import"./iconBase-CQ5bDd8R.js";import"./index-Bi3ZVyb4.js";function L(){const[o,m]=r.useState(null),[c,h]=r.useState([]),[a,l]=r.useState(1),n=7,p=N();r.useEffect(()=>{(async()=>{try{const t=await i.get(E.GET.MESSAGELIST);h(t.data.reverse())}catch{p("/error")}})()},[c]);const g=s=>{m(o===s?null:s)},x=a*n,j=x-n,f=c.slice(j,x),d=Math.ceil(c.length/n),u=async s=>{try{await i.delete(`https://starofelegance.com/api/messages/${s}/delete/`),fetchData()}catch{}},y=(s,t)=>{window.confirm(`Are you sure you want to delete the message sent from ${t}?`)&&(u(s),alert(`${t}'s message was deleted`))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:flex gap-14",children:[e.jsx(S,{}),e.jsxs("div",{className:"p-6 sm:p-10 flex-1 space-y-10 min-h-screen",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 md:ml-20 text-center sm:text-center md:text-start",children:"Dashboard"}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold md:ml-20 text-gray-700 mb-6 text-center sm:text-center md:text-start",children:"Message"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-gray-700 text-left",children:[e.jsx("th",{className:"py-5 px-6",children:"Name"}),e.jsx("th",{className:"py-5 px-6",children:"Email Address"}),e.jsx("th",{className:"py-5 px-6",children:"Phone"}),e.jsx("th",{className:"py-5 px-6",children:"Text Message"}),e.jsx("th",{className:"py-5 px-6",children:"Delete Message"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs(b.Fragment,{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-6 font-bold",children:s.name}),e.jsx("td",{className:"p-6",children:s.email}),e.jsx("td",{className:"p-6",children:s.phone}),e.jsx("td",{className:"p-6 cursor-pointer max-w-xs truncate",onClick:()=>g(s.id),children:s.text}),e.jsx("td",{className:"p-3 py-6",children:e.jsx("button",{onClick:()=>y(s.id,s.name),children:e.jsx(w,{className:"text-gray-500 text-2xl cursor-pointer"})})})]}),o===s.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-6 bg-gray-50",children:s.text})})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center space-x-4 mt-6",children:[e.jsxs("button",{onClick:()=>l(s=>Math.max(s-1,1)),disabled:a===1,className:"px-4 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 flex items-center space-x-2",children:[e.jsx(v,{}),e.jsx("span",{children:"Previous"})]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:d},(s,t)=>e.jsx("button",{onClick:()=>l(t+1),className:`px-3 py-1 rounded ${a===t+1?"bg-[#8B5715] text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:t+1},t+1))}),e.jsxs("button",{onClick:()=>l(s=>Math.min(s+1,d)),disabled:a===d,className:"px-4 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 flex items-center space-x-2",children:[e.jsx("span",{children:"Next"}),e.jsx(M,{})]})]})]})]})})}export{L as default};

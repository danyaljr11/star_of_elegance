import{j as e,u as A,b as r,R as E}from"./index-CkvAdKOf.js";import{a as O}from"./index-hw17F6dq.js";import{m as R,d as k,c as P}from"./index-DvQ5XEFF.js";import{S as _}from"./SideBar-Cb9YIg1_.js";import{a as o}from"./axios-upsvKRUO.js";import{A as B}from"./api-oWY9WQi5.js";import"./iconBase-CQ5bDd8R.js";import"./index-Bi3ZVyb4.js";function I(){return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 md:ml-20 text-center sm:text-center md:text-start",children:"Dashboard"}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold md:ml-20 text-gray-700 mb-6 text-center sm:text-center md:text-start",children:"Order"})]})}function H(){const m=A(),[x,u]=r.useState(null),[n,j]=r.useState([]),[a,c]=r.useState(1),l=7,g=s=>{u(x===s?null:s)};r.useEffect(()=>{(async()=>{try{const t=await o.get(B.GET.ORDERLIST);j(t.data.reverse())}catch{m("/error")}})()},[n]);const f=async s=>{try{await o.delete(`https://starofelegance.com/api/requests/${s}/delete/`),fetchData()}catch{}},y=(s,t)=>{window.confirm(`Are you sure you want to delete the order sent from ${t}?`)&&(f(s),alert(`${t}'s order was deleted`))},d=Math.ceil(n.length/l),i=a*l,N=i-l,b=n.slice(N,i),p=async(s,t,h,w,v,D,F,S)=>{try{const C=F==="new"?"finished":"new";response=await o.put(`https://starofelegance.com/api/requests/${s}/update/`,{name:t,email:h,phone:w,service_name:v,description:D,status:C,service_type:S},{headers:{"Content-Type":"application/json"}})}catch{}};return e.jsxs("div",{className:"md:flex h-screen gap-14",children:[e.jsx(_,{}),e.jsxs("div",{className:"p-6 sm:p-10 flex-1 space-y-10",children:[e.jsx(I,{}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-gray-700 text-left",children:[e.jsx("th",{className:"py-5 px-6",children:"Name"}),e.jsx("th",{className:"py-5 px-6",children:"Email Address"}),e.jsx("th",{className:"py-5 px-6",children:"Phone"}),e.jsx("th",{className:"py-5 px-6",children:"Service Name"}),e.jsx("th",{className:"py-5 px-6",children:"Description"}),e.jsx("th",{className:"py-5 px-6",children:"Type"}),e.jsxs("th",{className:"py-5 px-6 text-left text-gray-700 font-semibold flex items-center gap-2",children:["Status",e.jsx(R,{className:"text-gray-500 text-base"})]}),e.jsx("th",{className:"py-5 px-6"})]})}),e.jsx("tbody",{children:b.map(s=>e.jsxs(E.Fragment,{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-6 font-bold",children:s.name}),e.jsx("td",{className:"p-6",children:s.email}),e.jsx("td",{className:"p-6",children:s.phone}),e.jsx("td",{className:"p-6",children:s.service_name}),e.jsx("td",{className:"p-6 cursor-pointer max-w-xs truncate",onClick:()=>g(s.id),children:s.description}),e.jsx("td",{className:"p-6",children:s.service_type}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center space-x-2",children:s.status==="new"?e.jsx("button",{onClick:()=>p(s.id,s.name,s.email,s.phone,s.service_name,s.description,s.status,s.service_type),children:e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-700 rounded-full mr-2"}),"New"]})}):e.jsx("button",{onClick:()=>p(s.id,s.name,s.email,s.phone,s.service_name,s.description,s.status,s.service_type),children:e.jsxs("span",{className:"bg-[#FFEDDB] text-[#FF850B] px-3 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-[#FF850B] rounded-full mr-2"}),"Finish"]})})})}),e.jsx("td",{className:"p-3 py-6 flex space-x-4",children:e.jsx(O,{onClick:()=>y(s.id,s.name),className:"text-gray-500 text-2xl cursor-pointer"})})]}),x===s.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"p-6 bg-gray-50",children:s.description})})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center space-x-4 mt-6",children:[e.jsxs("button",{className:"px-4 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 flex items-center space-x-2",onClick:()=>c(s=>Math.max(s-1,1)),disabled:a===1,children:[e.jsx(k,{}),e.jsx("span",{children:"Previous"})]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:d},(s,t)=>e.jsx("button",{className:`px-3 py-1 rounded ${a===t+1?"bg-[#8B5715] text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,onClick:()=>c(t+1),children:t+1},t+1))}),e.jsxs("button",{className:"px-4 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 flex items-center space-x-2",onClick:()=>c(s=>Math.min(s+1,d)),disabled:a===d,children:[e.jsx("span",{children:"Next"}),e.jsx(P,{})]})]})]})]})}export{H as default};

import{u as y,e as E,b as s,j as e,d as w}from"./index-CkvAdKOf.js";import{S}from"./SideBar-Cb9YIg1_.js";import{l as C}from"./lineservices-BpSB_XNz.js";import{A as F}from"./api-oWY9WQi5.js";import{a as n}from"./axios-upsvKRUO.js";import"./index-Bi3ZVyb4.js";import"./iconBase-CQ5bDd8R.js";function L(){y();const{id:l}=E(),[r,h]=s.useState(null),[d,m]=s.useState(""),[p,x]=s.useState(""),[u,f]=s.useState(null),[o,b]=s.useState(null);s.useEffect(()=>{(async()=>{try{const t=await n.get(F.GET.SERVICELIST),i=Number(l),c=t.data.find(N=>N.id===i);c&&(h(c),m(c.name),x(c.description))}catch{}})()},[l]);const g=async()=>{try{await n.put(`https://starofelegance.com/api/services/${l}/update/`,{name:d,description:p},{headers:{"Content-Type":"application/json"}}),alert("Service updated successfully!"),window.location.reload()}catch{alert("Failed to save changes!")}},v=async()=>{if(!o){alert("Please choose a picture first!");return}const a=new FormData;a.append("picture",o);try{await n.post(`https://starofelegance.com/api/services/${l}/upload-picture/`,a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Image uploaded successfully!"),window.location.reload()}catch{alert("Failed to load image!")}},j=a=>{const t=a.target.files[0];if(t){b(t);const i=URL.createObjectURL(t);f(i)}};return r?e.jsxs("div",{className:"md:flex gap-14",children:[e.jsx(S,{}),e.jsxs("div",{className:"pl-28 md:pl-0",children:[e.jsx("p",{className:"font-bold text-2xl mt-16 mb-6 Poppins",children:"Dashboard"}),e.jsx("p",{className:"font-semibold text-2xl Poppins",children:"Services"}),e.jsxs("div",{className:"my-14",children:[e.jsx("p",{className:"font-bold text-xl dm",children:"Details"}),e.jsx("p",{className:"text-[#5F6165] font-normal text-lg dm",children:"Update The service here."}),e.jsx("img",{src:C,className:"mt-7",alt:"line"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col mb-7 mr-4",children:[e.jsx("label",{className:"font-extrabold text-xl text-black dm",children:"Name Of Service"}),e.jsx("textarea",{onChange:a=>m(a.target.value),value:d,placeholder:"Custom Furniture Manufacturing",className:"h-28 mr-3 w-full pl-3 py-7 border border-[#E9EAEC] rounded-lg dm"})]}),e.jsxs("div",{className:"flex flex-col mb-7 mr-4",children:[e.jsx("label",{className:"font-extrabold text-xl text-black dm",children:"Description"}),e.jsx("textarea",{onChange:a=>x(a.target.value),value:p,placeholder:"We create unique, high-quality furniture",className:"h-28 w-full pl-3 py-9 border border-[#E9EAEC] rounded-lg dm"})]}),e.jsx("button",{onClick:g,className:"font-extrabold text-xl text-white px-20 py-4 bg-[#B47F3E] rounded-2xl Abhaya hover:bg-white hover:text-[#B47F3E] hover:border-[#B47F3E] hover:border-2",children:"Save Edit"}),(r==null?void 0:r.picture)&&e.jsxs("div",{className:"flex mt-4 flex-col md:flex-row gap-4",children:[e.jsx("img",{className:"h-[350px] w-[350px] mb-10",src:r.picture,alt:"Service"}),e.jsxs("div",{className:"text-center w-[250px]",children:[e.jsxs("label",{className:"cursor-pointer border-dashed border-2 border-gray-300 p-16 flex items-center justify-center",children:[u?e.jsx("img",{src:u,alt:"Uploaded",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-500",children:"Upload"}),e.jsx("input",{type:"file",className:"hidden",onChange:j})]}),o&&e.jsx("button",{onClick:v,className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Upload picture"})]})]})]})]})]}):e.jsx(w,{})}export{L as default};

import{e as w,b as a,u as F,j as e}from"./index-CkvAdKOf.js";import{a as n}from"./axios-upsvKRUO.js";import{l as B}from"./lineservices-BpSB_XNz.js";import{S as E}from"./SideBar-Cb9YIg1_.js";/* empty css                  */import"./index-Bi3ZVyb4.js";import"./iconBase-CQ5bDd8R.js";function _(){const{id:r}=w(),[d,p]=a.useState(null),[m,x]=a.useState(null),[f,b]=a.useState(null),[h,g]=a.useState(null),[o,j]=a.useState([]),[l,N]=a.useState([]),v=F();a.useEffect(()=>{n.get("https://starofelegance.com/api/projects/").then(t=>{const s=t.data.find(c=>c.id===Number(r));s&&(j(s.before_pictures||[]),N(s.after_pictures||[]))}).catch(t=>console.error("Error fetching project data:",t))},[r,o,l]);const u=(t,s,c)=>{const i=t.target.files[0];i&&(s(URL.createObjectURL(i)),c(i))},y=async()=>{try{if(f){const t=new FormData;o.forEach(s=>t.append("before_pictures",s)),t.append("before_pictures",f),await n.post(`https://starofelegance.pythonanywhere.com/api/projects/${r}/upload-before-pictures/`,t,{headers:{"Content-Type":"multipart/form-data"}})}if(h){const t=new FormData;l.forEach(s=>t.append("after_pictures",s)),t.append("after_pictures",h),await n.post(`https://starofelegance.pythonanywhere.com/api/projects/${r}/upload-after-pictures/`,t,{headers:{"Content-Type":"multipart/form-data"}})}alert("Images uploaded successfully!"),x(null),p(null)}catch{alert("An error occurred while uploading images.")}};return e.jsxs("div",{className:"md:flex gap-14",children:[e.jsx(E,{}),e.jsxs("div",{className:"mt-11 pl-28 md:pl-0 ",children:[e.jsx("p",{className:"font-bold text-2xl mt-16 mb-6 Poppins",children:"Dashboard"}),e.jsx("p",{className:"font-semibold text-2xl Poppins",children:"Projects"}),e.jsxs("div",{className:"mt-14",children:[e.jsx("p",{className:"font-bold text-xl dm",children:"Details"}),e.jsx("p",{className:"text-[#5F6165] font-normal text-lg dm",children:"Update The picture here."}),e.jsx("img",{src:B,className:"mt-7",alt:"line"})]}),e.jsxs("div",{className:"mt-10 flex-row mr-10  md:flex gap-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"Before"}),o.map((t,s)=>e.jsx("img",{src:t,alt:"Before",className:"w-[350px] h-[350px] mb-4 object-cover"},s)),e.jsxs("label",{className:"cursor-pointer border-dashed border-2 border-gray-300 p-16 flex items-center justify-center",children:[d?e.jsx("img",{src:d,alt:"Before",className:"w-[350px] h-[350px] object-cover"}):e.jsx("span",{className:"text-gray-500",children:"Upload"}),e.jsx("input",{type:"file",className:"hidden",onChange:t=>u(t,p,b)})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"After"}),l.map((t,s)=>e.jsx("img",{src:t,alt:"After",className:"w-[350px] h-[350px] mb-4 object-cover"},s)),e.jsxs("label",{className:"cursor-pointer border-dashed border-2 border-gray-300 p-16 flex items-center justify-center",children:[m?e.jsx("img",{src:m,alt:"After",className:"w-[350px] h-[350px] object-cover"}):e.jsx("span",{className:"text-gray-500",children:"Upload"}),e.jsx("input",{type:"file",className:"hidden",onChange:t=>u(t,x,g)})]})]})]}),e.jsxs("div",{className:"mt-10 flex flex-row",children:[e.jsx("button",{onClick:y,className:"font-extrabold text-xl text-white px-20 py-4 bg-[#B47F3E] rounded-2xl hover:bg-white hover:text-[#B47F3E] transition-all duration-200 hover:border-[#B47F3E] hover:border-2",children:"upload photos"}),e.jsx("button",{onClick:()=>v("/dashboard/project/view"),className:"font-extrabold text-xl text-white mx-4 px-20 py-4 bg-[#B47F3E] rounded-2xl hover:bg-white hover:text-[#B47F3E] transition-all duration-200 hover:border-[#B47F3E] hover:border-2",children:"Finish"})]})]})]})}export{_ as default};
